.\" Traduction 06/08/2000 par Frédéric Delanoy (delanoy_f@yahoo.com)
.\" Mise à jour 06/09/2002 (rpm v4.0.4)
.\"
.\" This manpage has been automatically generated by docbook2man
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/>
.\" Please send any bug reports, improvements, comments, patches,
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.\"
.TH "RPM" "8" "06 juin 2001" "Red Hat, Inc."
.SH NOM
rpm \- Gestionnaire de Paquetages Red Hat
.SH SYNOPSIS
.SS "INTERROGER ET VÉRIFIER DES PAQUETAGES\ :"
.PP

\fBrpm\fR {\fB-q|--query\fR} [\fBoptions-sélection\fR] [\fBoptions-interrogation\fR]

\fBrpm\fR {\fB-V|--verify\fR} [\fBoptions-sélection\fR]
[\fB--nodeps\fR] [\fB--nofiles\fR] [\fB--nomd5\fR] [\fB--noscripts\fR]

\fBrpm\fR {\fB-K|--checksig\fR} [\fB--nogpg\fR] [\fB--nopgp\fR]
[\fB--nomd5\fR] \fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR
.SS "INSTALLER, METTRE À NIVEAU ET DÉSINSTALLER DES PAQUETAGES\ :"
.PP

\fBrpm\fR {\fB-i|--install\fR} [\fBoptions-installation\fR] \fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR

\fBrpm\fR {\fB-U|--upgrade\fR} [\fBoptions-installation\fR] \fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR

\fBrpm\fR {\fB-F|--freshen\fR} [\fBoptions-installation\fR] \fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR

\fBrpm\fR {\fB-e|--erase\fR} [\fB--allmatches\fR] [\fB--nodeps\fR]
[\fB--noscripts\fR] [\fB--notriggers\fR]
[\fB--test\fR] \fB\fINOM_PAQUETAGE\fB\fR\fI ...\fR
.SS "CONSTRUIRE DES PAQUETAGES\ :"
.PP

\fBrpm\fR {\fB-ba|-bb|-bp|-bc|-bi|-bl|-bs\fR}
[\fBoptions-construction\fR] \fB\fIFICHIER_SPECS\fB\fR\fI ...\fR

\fBrpm\fR {\fB-ta|-tb|-tp|-tc|-ti|-tl|-ts\fR}
[\fBoptions-construction\fR] \fB\fITARBALL\fB\fR\fI ...\fR

\fBrpm\fR {\fB--rebuild|--recompile\fR} \fB\fIPAQUETAGE_SOURCE\fB\fR\fI ...\fR

.SS "DIVERS\ :"
.PP

\fBrpm\fR {\fB--initdb|--rebuilddb\fR}

\fBrpm\fR {\fB--addsign|--resign\fR} \fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR

\fBrpm\fR {\fB--querytags|--showrc\fR}

\fBrpm\fR {\fB--setperms|--setugids\fR} \fB\fINOM_PAQUETAGE\fB\fR\fI ...\fR
.SS "OPTIONS DE SÉLECTION"
.PP

\fB[\fINOM_PAQUETAGE\fB] [-a,--all] [-f,--file\ \fIFICHIER\fB]
[-g,--group\ \fIGROUPE\fB] [-p,--package\ \fIFICHIER_PAQUETAGE\fB]
[--querybynumber\ \fINOMBRE\fB] [--triggeredby\ \fINOM_PAQUETAGE\fB]
[--whatprovides\ \fICAPACITÉ\fB] [--whatrequires\ \fICAPACITÉ\fB]\fR
.SS "OPTIONS D'INTERROGATION"
.PP

\fB[--changelog] [-c,--configfiles] [-d,--docfiles] [--dump] [--filesbypkg]
[-i,--info] [--last] [-l,--list] [--provides]
[--qf,--queryformat\ \fIFORMAT_REQUÊTE\fB] [-R,--requires] [--scripts]
[-s,--state] [--triggers,--triggerscripts]\fR
.SS "OPTIONS D'INSTALLATION"
.PP

\fB[--allfiles] [--badreloc] [--excludepath\ \fIANCIEN_CHEMIN\fB]
[--excludedocs] [--force] [-h,--hash] [--ignoresize] [--ignorearch]
[--ignoreos] [--includedocs] [--justdb] [--nodeps] [--noorder]
[--noscripts] [--notriggers] [--oldpackage] [--percent]
[--prefix \fINOUVEAU_CHEMIN\fB] [--relocate\ \fIANCIEN_CHEMIN\fB=\fINOUVEAU_CHEMIN\fB]
[--replacefiles] [--replacepkgs] [--test]\fR
.SS "OPTIONS DE CONSTRUCTION"
.PP

\fB[--buildroot \fIRÉPERTOIRE\fB] [--clean] [--nobuild] [--rmsource] [--rmspec]
[--short-circuit] [--sign] [--target\ \fIPLATE-FORME\fB]\fR

.SH "DESCRIPTION"
.PP
\fBrpm\fR est un puissant \fIgestionnaire de paquetages\fR, qui peut être
utilisé pour construire, installer, interroger, vérifier, mettre à jour, et
désinstaller des paquetages de logiciels individuels. Un \fIpaquetage\fR
est constitué d'une archive de fichiers, et de méta-données utilisées pour
installer et supprimer les fichiers de l'archive. Les méta-données incluent
les scripts assistants, les attributs des fichiers, et des informations
décrivant le paquetage. Il y a deux types de \fBpaquetages\fR\ : les
paquetages binaires, utilisés pour encapsuler des logiciels à installer, et
les paquetages de sources, qui contiennent le code et la recette permettant
de produire des paquetages binaires.
.PP
Un des modes de base suivants doit être sélectionné\ :
\fBInterroger\fR,
\fBVérifier\fR,
\fBVérifier Signature\fR,
\fBInstaller/Mettre à niveau/Rafraîchir\fR,
\fBDésinstaller\fR,
\fBConstruire Paquetage\fR,
\fBConstruire Paquetage à partir d'un Tarball\fR (NdT\ : sources au
format .tar.xx),
\fBRecompiler Paquetage\fR,
\fBInitialiser Base de Données\fR,
\fBReconstruire Base de Données\fR,
\fBResigner\fR,
\fBAjouter Signature\fR,
\fBFixer Propriétaires/Groupes\fR,
\fBMontrer les Options d'Interrogation\fR, et
\fBMontrer Configuration\fR.
.SS "OPTIONS GÉNÉRALES"
.PP
Ces options peuvent être utilisées dans tous les modes.
.TP
\fB-?, --help\fR
Afficher un message d'utilisation plus long que de coutume.
.TP
\fB--version\fR
Afficher une ligne unique contenant le numéro de version du \fBrpm\fR
utilisé.
.TP
\fB--quiet\fR
Afficher le moins possible - normalement, seuls les messages d'erreur
seront affichés.
.TP
\fB-v\fR
Afficher des informations verbeuses - les messages de progression des
routines seront normalement affichés
.TP
\fB-vv\fR
Afficher un tas d'horribles informations de débogage.
.TP
\fB--rcfile \fILISTE_FICHIERS\fB\fR
Chacun des fichiers de \fILISTE_FICHIERS\fR (qui sont séparés par des
deux-points) est lu séquentiellement par \fBrpm\fR pour obtenir des
informations de configuration. Seul le premier fichier de la liste doit
exister, et les tildes seront développés en \fB$HOME\fR. La
\fILISTE_FICHIERS\fR par défaut est
\fI/usr/lib/rpm/rpmrc\fR:\fI/etc/rpmrc\fR:\fI~/.rpmrc\fR.
.TP
\fB--pipe \fICOMMANDE\fB\fR
Envoyer la sortie de \fBrpm\fR à la \fICOMMANDE\fR par l'intermédiaire d'un
tube.
.TP
\fB--dbpath \fIRÉPERTOIRE\fB\fR
Utiliser la base de données située dans \fIRÉPERTOIRE\fR au lieu du
chemin par défaut \fI/var/lib/rpm\fR.
.TP
\fB--root \fIRÉPERTOIRE\fB\fR
Utiliser le système ayant \fIRÉPERTOIRE\fR comme racine pour toutes les
opérations. Notez que cela signifie que la base de données sera lue ou
modifiée dans \fIRÉPERTOIRE\fR et que chacun des scriptlets (petits
scripts) \fB%pre\fR et/ou \fB%post\fR sera exécuté après un chroot(2) vers
\fIRÉPERTOIRE\fR.
.SS "OPTIONS D'INSTALLATION ET DE MISE À NIVEAU"
.PP
La forme générale d'une commande d'installation rpm est
.PP
\fBrpm\fR {\fB-i|--install\fR} [\fBoptions-installation\fR]
\fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR
.PP
Cela installe un nouveau paquetage.
.PP
La forme générale d'une commande de mise à niveau rpm est
.PP
\fBrpm\fR {\fB-U|--upgrade\fR} [\fBoptions-installation\fR]
\fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR
.PP
Cela met à niveau ou installe le paquetage actuellement installé vers une
version plus récente. C'est similaire à l'installation, sauf que toutes les
anciennes versions du paquetage sont désinstallées après que le nouveau
paquetage ait été installé.
.PP
\fBrpm\fR {\fB-F|--freshen\fR} [\fBoptions-installation\fR]
\fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR
.PP
Cela mettra à niveau les paquetages, mais seulement si une version plus
ancienne existe à cet instant. Le \fIFICHIER_PAQUETAGE\fR peut être
spécifié en tant qu'URL \fBftp\fR ou \fBhttp\fR, auquel cas le paquetage
sera téléchargé avant d'être installé. Voyez \fBOPTIONS FTP/HTTP\fR pour
des informations sur le support interne d'un client \fBftp\fR et \fBhttp\fR
par \fBrpm\fR.
.PP
.TP
\fB--allfiles\fR
Installer ou mettre à niveau tous les fichiers manquants du paquetage, même
s'ils existent déjà.
.TP
\fB--badreloc\fR
Utilisé avec \fB--relocate\fR, permet des relogements dans tous les chemins
de fichiers, et pas seulement dans les \fIANCIEN_CHEMIN\fR inclus dans les
indications de relogement du paquetage binaire.
.TP
\fB--excludepath \fIANCIEN_CHEMIN\fB\fR
Ne pas installer de fichier dont le nom commence par \fIANCIEN_CHEMIN\fR.
.TP
\fB--excludedocs\fR
Ne pas installer de fichier marqué comme faisant partie de la documentation
(ce qui inclut les pages de manuel et les documents texinfo).
.TP
\fB--force\fR
Similaire à l'utilisation de \fB--replacepkgs\fR,
\fB--replacefiles\fR, et \fB--oldpackage\fR.
.TP
\fB-h, --hash\fR
Afficher 50 marques de hachage quand l'archive du paquetage est déballée.
À\ utiliser avec \fB\-v|--verbose\fR pour un plus bel affichage.
.TP
\fB--ignoresize\fR
Ne pas vérifier s'il y a un espace disque suffisant sur les systèmes
de fichiers montés avant d'installer ce paquetage.
.TP
\fB--ignorearch\fR
Permettre l'installation ou la mise à niveau même si les architectures du
paquetage binaire et de l'hôte ne correspondent pas.
.TP
\fB--ignoreos\fR
Permettre l'installation ou la mise à niveau même si les systèmes
d'exploitation du paquetage binaire et de l'hôte ne concordent pas.
.TP
\fB--includedocs\fR
Installer les fichiers de documentation. C'est le comportement par défaut.
.TP
\fB--justdb\fR
Ne mettre à jour que la base de données, et pas le système de fichiers.
.TP
\fB--nodeps\fR
Ne pas effectuer de vérification des dépendances avant d'installer ou de
mettre à niveau un paquetage.
.TP
\fB--noorder\fR
Ne pas réordonner les paquetages lors d'une installation. La liste des
paquetages devrait normalement être réordonnée pour satisfaire aux
dépendances.
.TP
\fB--noscripts\fR
.TP
\fB--nopre\fR
.TP
\fB--nopost\fR
.TP
\fB--nopreun\fR
.TP
\fB--nopostun\fR
Ne pas exécuter le scriptlet de même nom. L'option
\fB--noscripts\fR est équivalente à

\fB--nopre\fR
\fB--nopost\fR
\fB--nopreun\fR
\fB--nopostun\fR

et désactive l'exécution des scriptlets correspondants
\fB%pre\fR,
\fB%post\fR,
\fB%preun\fR, et
\fB%postun\fR.
.TP
\fB--notriggers\fR
.TP
\fB--notriggerin\fR
.TP
\fB--notriggerun\fR
.TP
\fB--notriggerpostun\fR
Ne pas exécuter de scriptlet déclenché du type spécifié. L'option
\fB--notriggers\fR est équivalente à

\fB--notriggerin\fR
\fB--notriggerun\fR
\fB--notriggerpostun\fR

et désactive l'exécution des scriptlets correspondants
\fB%triggerin\fR,
\fB%triggerun\fR, et
\fB%triggerpostun\fR.
.TP
\fB--oldpackage\fR
Permettre qu'une mise à niveau remplace un paquetage par un paquetage plus
ancien.
.TP
\fB--percent\fR
Afficher le pourcentage de progression de l'extraction des fichiers de
l'archive du paquetage, afin de faciliter l'exécution de \fBrpm\fR depuis
d'autres outils.
.TP
\fB--prefix \fINOUVEAU_CHEMIN\fB\fR
Pour les paquetages binaires relogeables, traduire tous les chemins de
fichiers présents dans les indications de relogement du paquetage, et
débutant par le préfixe d'installation, par \fINOUVEAU_CHEMIN\fR.
.TP
\fB--relocate \fIANCIEN_CHEMIN\fB=\fINOUVEAU_CHEMIN\fB\fR
Pour les paquetages binaires relogeables, traduire tous les chemins de
fichiers présents dans les indications de relogement du paquetage et
débutant par \fIANCIEN_CHEMIN\fR par \fINOUVEAU_CHEMIN\fR. Cette option
peut être utilisée de façon répétitive si plusieurs \fIANCIEN_CHEMIN\fR du
paquetage doivent être relogés.
.TP
\fB--replacefiles\fR
Installer les paquetages même s'ils remplacent des fichiers d'autres
paquetages déjà installés.
.TP
\fB--replacepkgs\fR
Installer les paquetages même si certains d'entre eux sont déjà installés
sur ce système.
.TP
\fB--nobuild\fR
Ne pas installer le paquetage, mais uniquement rechercher et rapporter des
conflits potentiels.
.SS "OPTIONS D'INTERROGATION"
.PP
La forme générale d'une commande d'interrogation rpm est
.PP
\fBrpm\fR {\fB-q|--query\fR} [\fBoptions-sélection\fR]
[\fBoptions-interrogation\fR]
.PP
Vous pouvez spécifier le format dans lequel les informations sur le
paquetage doivent être affichées. Pour ce faire, utilisez l'option
{\fB--qf|--queryformat\fR}, suivie par la chaîne de format
\fIFORMAT_REQUÊTE\fR. Les chaînes de format sont des versions modifiées de
celles du \fBprintf(3)\fR standard. Le format est constitué de chaînes de
caractères statiques (qui peuvent inclure les séquences d'échappement de
caractère C standard pour les sauts de lignes, tabulations et autres
caractères spéciaux) et de formateurs de type \fBprintf(3)\fR. Comme
\fBrpm\fR connaît déjà le type à afficher, le spécificateur de type doit
néanmoins être omis, et être remplacé par le nom de l'étiquette d'en-tête à
afficher, enfermé dans des caractères \fB{}\fR. Les noms d'étiquettes sont
insensibles à la casse, et la partie \fBRPMTAG_\fR du nom de l'étiquette
peut également être omise.
.PP
Des formats de sortie alternatifs peuvent être requis en faisant suivre
l'étiquette par \fB:\fItypetag\fB\fR. Actuellement, les types suivants sont
supportés\ :
\fBoctal\fR,
\fBdate\fR,
\fBshescape\fR,
\fBperms\fR,
\fBfflags\fR, and
\fBdepflags\fR.
Par exemple, pour n'afficher que le nom des paquetages interrogés, vous
pourriez utiliser \fB%{NAME}\fR comme chaîne de format. Pour afficher les
noms de paquetages et les informations de distribution en deux colonnes,
vous pourriez utiliser \fB%-30{NAME}%{DISTRIBUTION}\fR. \fBrpm\fR affichera
une liste de tous les étiquettes qu'il connaît quand il est invoqué avec
l'argument \fB--querytags\fR.
.PP
Il y a deux sous-ensembles d'options d'interrogation\ : la sélection de
paquetage, et la sélection d'informations.
.SS "OPTIONS DE SÉLECTION DE PAQUETAGES\ :"
.PP
.TP
\fB\fINOM_PAQUETAGE\fB\fR
Interroger le paquetage installé nommé \fINOM_PAQUETAGE\fR.
.TP
\fB-a, --all\fR
Interroger tous les paquetages installés.
.TP
\fB-f, --file \fIFICHIER\fB\fR
Interroger le paquetage possédant le \fIFICHIER\fR.
.TP
\fB-g, --group \fIGROUPE\fB\fR
Interroger le paquetage de groupe \fIGROUPE\fR.
.TP
\fB-p, --package \fIFICHIER_PAQUETAGE\fB\fR
Interroger un paquetage (non installé) \fIFICHIER_PAQUETAGE\fR. Le
\fIFICHIER_PAQUETAGE\fR peut être spécifié en tant qu'URL de style
\fBftp\fR ou \fBhttp\fR, auquel cas l'en-tête du paquetage sera téléchargé
et interrogé. Voyez \fBOPTIONS FTP/HTTP\fR pour obtenir des informations
sur le support interne d'un client ftp et http par RPM. Le ou les arguments
\fIFICHIER_PAQUETAGE\fR, s'ils ne sont pas des paquetages binaires, seront
interprétés comme étant un manifeste ascii de paquetage. Les commentaires
sont autorisés\ ; ils débutent par un «\ #\ », et chaque ligne d'un fichier
de manifeste de paquetage peut inclure des motifs génériques (y compris
ceux spécifiant des URLs distantes) séparés par des espaces, qui seront
développés en chemins qui remplacent le manifeste du paquetage par les
arguments \fIFICHIER_PAQUETAGE\fR additionnels ajoutés à la requête.
.TP
\fB--querybynumber \fINOMBRE\fB\fR
Interroger directement la \fINOMBRE\fR-ième entrée de la base de données\ ;
n'est utile que pour le débogage.
.TP
\fB--specfile \fIFICHIER_SPECS\fB\fR
Analyse syntaxiquement et interroge le \fIFICHIER_SPECS\fR (NdT\ : fichier
de spécifications) comme s'il s'agissait d'un paquetage. Bien que toutes
les informations (p.ex. les listes de fichiers) ne soient pas disponibles,
ce type d'interrogation permet à rpm d'être utilisé pour extraire des
informations de fichiers specs sans devoir écrire un analyseur syntaxique
de fichiers de spécifications.
.TP
\fB--triggeredby \fINOM_PAQUETAGE\fB\fR
Interroger les paquetages qui sont déclenchés par le(s) paquetage(s)
\fINOM_PAQUETAGE\fR.
.TP
\fB--whatprovides \fICAPACITÉ\fB\fR
Interroger tous les paquetages qui fournissent la capacité \fICAPACITÉ\fR.
.TP
\fB--whatrequires \fICAPACITÉ\fB\fR
Interroger tous les paquetages qui requièrent \fICAPACITÉ\fR pour un
fonctionnement correct.
.SS "OPTIONS D'INTERROGATION DE PAQUETAGE\ :"
.PP
.TP
\fB--changelog\fR
Afficher les informations concernant les changements dans ce paquetage.
.TP
\fB-c, --configfiles\fR
Lister uniquement les fichiers de configuration (implique \fB-l\fR).
.TP
\fB-d, --docfiles\fR
Lister uniquement les fichiers de documentation (implique \fB-l\fR).
.TP
\fB--dump\fR
Afficher les informations sur le fichier comme suit\ :
.sp
.RS

.nf
 chemin taille date_modif somme_md5 mode propriétaire
 groupe isconfig isdoc rdev symlink

.fi
.RE


Cette option doit être utilisée avec au moins une option parmi
\fB-l\fR,
\fB-c\fR,
\fB-d\fR.
.TP
\fB--filesbypkg\fR
Lister tous les fichiers de chaque paquetage sélectionné.
.TP
\fB-i, --info\fR
Afficher des informations sur le paquetage, incluant son nom, sa version et
sa description. Utilise l'option \fB--queryformat\fR si elle a été
spécifiée.
.TP
\fB--last\fR
Ordonner le listing des paquetages par date d'installation de sorte que les
derniers paquetages installés apparaissent en premier lieu.
.TP
\fB-l, --list\fR
Lister les fichiers du paquetage.
.TP
\fB--provides\fR
Lister les capacités que fournit ce paquetage.
.TP
\fB-R, --requires\fR
Lister les paquetages desquels dépend ce paquetage.
.TP
\fB--scripts\fR
Lister les scriplets spécifiques au paquetage qui sont utilisés comme
partie intégrante des processus d'installation et de désinstallation.
.TP
\fB-s, --state\fR
Afficher les \fIétats\fR des fichiers du paquetage (implique \fB\-l\fR).
L'état de chaque fichier est \fInormal\fR, \fInon installé\fR ou
\fIremplacé\fR.
.TP
\fB--triggers, --triggerscripts\fR
Afficher les scripts déclenchés qui sont contenus dans le paquetage (s'il y
en a).
.SS "OPTIONS DE VÉRIFICATION"
.PP
La forme générale d'une commande de vérification rpm est
.PP
\fBrpm\fR {\fB-V|--verify\fR} [\fBoptions-sélection\fR]
[\fB--nodeps\fR] [\fB--nofiles\fR] [\fB--nomd5\fR] [\fB--noscripts\fR]
.PP
La vérification d'un paquetage compare les informations sur les fichiers
installés dans le paquetage avec les informations sur les fichiers obtenues
à partir des méta-données du paquetage original conservées dans la base de
données rpm. Entre autres choses, la vérification compare la taille, la
somme MD5, les permissions, le propriétaire et le groupe de chaque fichier.
Toutes les discordances sont affichées. Les fichiers qui n'avaient pas été
installés à partir du paquetage (p.ex. les fichiers de documentation exclus
lors de l'installation en utilisant l'option «\ \fB--excludedocs\fR\ »,
seront ignorés silencieusement.
.PP
Les options de sélection de paquetage sont les mêmes que celles relatives à
l'interrogation de paquetages (ce qui inclut les fichiers de manifeste de
paquetage comme arguments). Les autres options ne pouvant être utilisées
qu'en mode vérification sont\ :
.TP
\fB--nodeps\fR
Ne pas vérifier les dépendances.
.TP
\fB--nofiles\fR
Ne pas vérifier les fichiers.
.TP
\fB--nomd5\fR
Ne pas vérifier les sommes de contrôle MD5.
.TP
\fB--noscripts\fR
Ne pas exécuter le scriptlet \fB%verifyscript\fR (s'il y en a un).
.PP
Le format de sortie est une chaîne de 9 caractères, un «\ \fBc\fR\ »
éventuel dénotant un fichier de configuration, et ensuite le nom du
fichier. Chacun des 9 caractères indique le résultat d'une comparaison
d'attribut(s) du fichier avec la valeur du (des) attribut(s) enregistré(s)
dans la base de données. Un «\ \fB.\fR\ » (point) seul signifie que le test
s'est bien passé, alors qu'un «\ \fB?\fR\ » seul indique que le test n'a
pas pu être effectué (p.ex. quand les permissions d'accès aux fichier
empêchent la lecture). Sinon, le caractère mnémonique affiché en \fBG\fRras
dénote l'échec du test \fB--verify\fR correspondant\ :

\fBS\fR
la taille (\fBS\fRize) du fichier diffère

\fBM\fR
le \fBM\fRode diffère (inclut les permissions et le type du fichier)

\fB5\fR
la somme MD\fB5\fR diffère

\fBD\fR
Le numéro de périphérique (\fBD\fRevice) majeur/mineur diffère

\fBL\fR
Le chemin renvoyé par read\fBL\fRink(2) diffère

\fBU\fR
L'\fBU\fRtilisateur propriétaire diffère

\fBG\fR
Le \fBG\fRroupe propriétaire diffère

\fBT\fR
La date de dernière modification (m\fBT\fRime) diffère
.SS "VÉRIFICATION DE SIGNATURE"
.PP
La forme générale d'une commande de vérification de signature rpm est
.PP
\fBrpm\fR \fB--checksig\fR [\fB--nogpg\fR] [\fB--nopgp\fR] [\fB--nomd5\fR] \fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR
.PP
Ceci vérifie la signature PGP du paquetage \fI<fichier_paquetage>\fR pour
s'assurer de son intégrité et de son origine. Les informations de
configuration PGP sont lues à partir des fichiers de configuration. Voyez
la section sur les SIGNATURES PGP pour les détails.
.SS "OPTIONS DE DÉSINSTALLATION"
.PP
La forme générale d'une commande de désinstalltion rpm est
.PP
\fBrpm\fR {\fB-e|--erase\fR} [\fB--allmatches\fR] [\fB--nodeps\fR] [\fB--noscripts\fR] [\fB--notriggers\fR] [\fB--test\fR] \fB\fINOM_PAQUETAGE\fB\fR\fI ...\fR
.PP
Les options suivantes peuvent également être utilisées\ :
.TP
\fB--allmatches\fR
Désinstaller toutes les versions du paquetage correspondant à
\fINOM_PAQUETAGE\fR. Normalement, une erreur se produit si
\fINOM_PAQUETAGE\fR correspond à plusieurs paquetages.
.TP
\fB--nodeps\fR
Ne pas effectuer de vérification des dépendances avant de désinstaller les
paquetages.
.TP
\fB--noscripts\fR
.TP
\fB--nopreun\fR
.TP
\fB--nopostun\fR
Ne pas exécuter le scriptlet de même nom. L'option \fB--noscripts\fR lors
de la désinstallation du paquetage est équivalente à

\fB--nopreun\fR
\fB--nopostun\fR

et désactive l'exécution du ou des scriptlets
\fB%preun\fR et
\fB%postun\fR
correspondants.
.TP
\fB--notriggers\fR
.TP
\fB--notriggerun\fR
.TP
\fB--notriggerpostun\fR
Ne pas exécuter de scriptlet déclenché du type spécifié. L'option
\fB--notriggers\fR est équivalente à

\fB--notriggerun\fR
\fB--notriggerpostun\fR

et désactive l'exécution du ou des scriptlets
\fB%triggerun\fR et
\fB%triggerpostun\fR
correspondants.
.TP
\fB--test\fR
Ne pas réellement désinstaller quoi que ce soit, simplement effectuer un
test pour voir si c'est possible. Utile conjointement avec l'option
\fB\-vv\fR pour le débogage.
.SS "OPTIONS DE CONSTRUCTION"
La forme générale d'une commande de construction rpm est
.PP
\fBrpm\fR {\fB-b\fIÉTAPE\fB|-t\fIÉTAPE\fB\fR}
[\fBoptions-construction\fR] \fB\fIFICHIER\fB\fR\fI ...\fR
.PP
L'argument utilisé est \fB-b\fR si un fichier spec est utilisé pour
construire le paquetage et \fB-t\fR si \fBrpm\fR devrait examiner le
contenu d'un fichier tar (éventuellement compressé) pour obtenir le fichier
de spécifications à utiliser. Après le premier argument, le caractère
suivant (\fIÉTAPE\fR) spécifie les étapes de construction et d'empaquetage
à effectuer, et peut être\ :
.TP
\fB-ba\fR
Construire les paquetages binaires et sources (après avoir effectué les
étapes %prep, %build et %install).
.TP
\fB-bb\fR
Construire un paquetage binaire (après avoir effectué les étapes %prep,
%build et %install).
.TP
\fB\-bp\fR
Exécuter l'étape «\ %prep\ » du fichier de spécifications. Normalement,
ceci implique de dépaqueter les sources et d'appliquer tous les patches.
.TP
\fB-bc\fR
Effectuer l'étape «\ %build\ » du fichier de spécifications (après avoir
effectué l'étape %prep). Cela implique en général l'équivalent d'un
«\ make\ ».
.TP
\fB-bi\fR
Effectuer l'étape «\ %install\ » du fichier de spécifications (après avoir
effectué les étapes %prep et %build). Cela implique généralement
l'équivalent d'un «\ make install\ ».
.TP
\fB-bl\fR
Accomplir une «\ vérification de liste\ ». La section «\ %files\ » du
fichier de spécifications subit le développement des macros, et des
vérifications sont effectuées pour vérifier que chaque fichier existe.
.TP
\fB-bs\fR
Construire uniquement le paquetage de sources.
.PP
Les options suivantes peuvent également être utilisées\ :
.TP
\fB--buildroot \fIRÉPERTOIRE\fB\fR
Lors de la construction du paquetage, surcharger l'étiquette BuildRoot
(Construire Racine) avec le répertoire \fIRÉPERTOIRE\fR.
.TP
\fB--clean\fR
Supprimer l'arbre de construction après que les paquetages aient été créés.
.TP
\fB--nobuild\fR
N'exécuter aucune étape de construction. Utile pour le test de fichiers
spec.
.TP
\fB--rmsource\fR
Supprimer les sources après la construction (cette option peut également
être utilisée seule\ ; exemple\ : «\ \fBrpm --rmsource foo.spec\fR\ »).
.TP
\fB--rmspec\fR
Supprimer le fichier spec après la construction (peut également être
utilisé seul, p.ex. «\ \fBrpm --rmspec foo.spec\fR\ »).
.TP
\fB--short-circuit\fR
Aller directement à l'étape spécifiée (c.-à-d. éviter toutes les étapes
intermédiaires). Uniquement valide avec \fB-bc\fR et \fB-bi\fR.
.TP
\fB--sign\fR
Incorporer une signature PGP dans le paquetage. Cette signature peut être
utilisée pour vérifier l'intégrité et l'origine du paquetage. Voyez la
section sur les SIGNATURES PGP pour les détails de configuration.
.TP
\fB--target \fIPLATE-FORME\fB\fR
Pendant la construction du paquetage, interpréter \fIPLATE-FORME\fR comme
étant la valeur de \fBarch-vendor-os\fR et fixer les macros \fB%_target\fR,
\fB%_target_arch\fR et \fB%_target_os\fR en conséquence.
.SS "OPTIONS DE RECONSTRUCTION ET DE RECOMPILATION"
.PP
Il y a deux autres façons d'invoquer une construction avec rpm\ :
.PP
\fBrpm\fR {\fB--rebuild|--recompile\fR} \fB\fIPAQUETAGE_SOURCE\fB\fR\fI ...\fR
.PP
Quand il est invoqué de cette façon, \fBrpm\fR installe le paquetage de
sources désigné, et effectue une préparation, une compilation et une
installation. \fB--rebuild\fR construit en outre un nouveau paquetage
binaire. Quand la construction est terminée, le répertoire de construction
est supprimé (comme avec \fB--clean\fR) et les sources ainsi que le fichier
de spécifications du paquetage sont supprimés.
.SS "SIGNER UN PAQUETAGE"
.PP
\fBrpm\fR {\fB--addsign|--resign\fR} \fB\fIFICHIER_PAQUETAGE\fB\fR\fI ...\fR
.PP
L'option \fB--addsign\fR génère et insère de nouvelles signatures pour
chaque paquetage. Toute signature existante sera supprimée.
.PP
L'option \fB--resign\fR génère et ajoute les nouvelles signatures pour les
paquetages spécifiés tous en conservant celles existant déjà.
.SS "SIGNATURES GPG"
.PP
Pour utiliser la fonctionnalité de signature, \fBrpm\fR doit être configuré
pour exécuter GPG, et doit être capable de trouver un porte-clés public
(keyring) comportant les clés publiques de Red Hat (ou d'un autre vendeur).
Par défaut, \fBrpm\fR utilise les mêmes conventions que GPG pour trouver
les porte-clés, à savoir la variable d'environnement \fB$GPGPATH\fR). Si
vos porte-clés ne sont pas situés là où GPG les attend, vous devrez fixer
la valeur de la macro \fB%_gpg_path\fR à l'endroit où se situent les
porte-clés GPG à utiliser.
.PP
Si vous voulez pouvoir signer les paquetages que vous avez créés
vous\-même, vous devrez également créer votre propre paire clé publique/clé
secrète (voir le manuel GPG). Vous devrez également configurer les macros
suivantes\ :
.TP
\fB%_gpg_name\fR
Le nom de l'«\ utilisateur\ » dont vous voulez utiliser la clé pour
signer vos paquetages.
.PP
Lors de la construction de paquetages, vous ajouterez ensuite \fB--sign\fR
sur la ligne de commandes. On vous demandera votre phrase de passe, et
votre paquetage sera construit et signé. Par exemple, pour pouvoir utiliser
GPG pour signer les paquetages en tant qu'utilisateur \fI«\ John Doe
<jdoe@foo.com>\ »\fR à partir des porte-clés situés dans
\fB/etc/rpm/.gpg\fR en utilisant l'exécutable \fB/usr/bin/gpg\fR, vous
devriez inclure
.PP

.nf
%_gpg_path /etc/rpm/.gpg
%_gpg_name John Doe <jdoe@foo.com>
%_gpgbin /usr/bin/gpg
.fi
.PP
dans un fichier de configuration de macros. Utilisez \fB/etc/rpm/macros\fR
pour une configuration par système et \fB~/.rpmmacros\fR pour une
configuration par utilisateur.
.SS "OPTIONS DE RECONSTRUCTION DE BASE DE DONNÉES"
.PP
La forme générale d'une commande de reconstruction d'une base de données
rpm est
.PP
\fBrpm\fR {\fB--initdb|--rebuilddb\fR} [\fB-v\fR] [\fB--dbpath\ \fIRÉPERTOIRE\fB\fR] [\fB--root\ \fIRÉPERTOIRE\fB\fR]
.PP
Utilisez \fB--initdb\fR pour reconstruire une nouvelle base de données\ ;
utilisez \fB--rebuilddb\fR pour reconstruire les index de la base de
données à partir des en-têtes des paquetages installés.
.SS "SHOWRC"
.PP
La commande
.PP
\fBrpm\fR \fB--showrc\fR
.PP
affiche les valeurs que \fBrpm\fR va utiliser pour toutes les options qui
sont actuellement définies dans le(s) fichier(s) de configuration
\fIrpmrc\fR et \fImacros\fR.
.SS "OPTIONS FTP/HTTP"
.PP
\fBrpm\fR peut agir comme un client FTP et/ou HTTP afin que les paquetages
puissent être interrogés et installés à partir d'Internet. Les fichiers de
paquetage pour les opérations d'installation, de mise à niveau et
d'interrogation peuvent être spécifiés dans une URL de style \fBftp\fR ou
\fBhttp\fR\ :
.PP
ftp://UTILISATEUR:MOT-PASSE@HÔTE:PORT/chemin/vers/paquetage.rpm
.PP
Si la partie \fB:MOT-PASSE\fR est omise, le mot de passe sera demandé (une
seule fois par paire utilisateur/nom_hôte). Si tant l'utilisateur que le
mot de passe est omis, le \fBftp\fR anonyme est utilisé. Dans tous les cas,
des transferts \fBftp\fR passifs (PASV) sont effectués.
.PP
\fBrpm\fR permet d'utiliser les options suivantes avec les URLs ftp\ :
.TP
\fB--ftpproxy \fIHÔTE\fB\fR
L'hôte \fIHÔTE\fR sera utilisé comme serveur proxy pour tous les transferts
ftp, ce qui permet aux utilisateurs d'effectuer des connexions ftp au
travers de firewalls (gardes-barrières) qui utilisent des proxys. Cette
option peut également être spécifiée en configurant la macro
\fB%_ftpproxy\fR.
.TP
\fB--ftpport \fIPORT\fB\fR
Le numéro de \fIPORT\fR TCP à utiliser pour la connexion ftp sur le serveur
proxy ftp au lieu du port par défaut. Cette option peut également être
spécifiée en configurant la macro \fB%_ftpport\fR.
.PP
\fBrpm\fR permet d'utiliser les options suivantes avec les URL \fBhttp\fR\ :
.TP
\fB--httpproxy \fIHÔTE\fB\fR
L'hôte \fIHÔTE\fR sera utilisé comme un serveur délégué (proxy) pour tous
les transferts \fBhttp\fR. Cette option peut également être spécifiée en
configurant la macro \fB%_httpproxy\fR.
.TP
\fB--httpport \fIPORT\fB\fR
Le numéro de \fIPORT\fR TCP à utiliser pour la connexion \fBhttp\fR sur le
serveur proxy http au lieu du port par défaut. Cette option peut également
être spécifiée en configurant la macro \fB%_httpport\fR.
.SH "FICHIERS"
.PP
\fI/usr/lib/rpm/rpmrc\fR

\fI/etc/rpmrc\fR

\fI~/.rpmrc\fR

\fI/usr/lib/rpm/macros\fR

\fI/etc/rpm/macros\fR

\fI~/.rpmmacros\fR

\fI/var/lib/rpm/Conflictname\fR

\fI/var/lib/rpm/Basenames\fR

\fI/var/lib/rpm/Group\fR

\fI/var/lib/rpm/Name\fR

\fI/var/lib/rpm/Packages\fR

\fI/var/lib/rpm/Providename\fR

\fI/var/lib/rpm/Requirename\fR

\fI/var/lib/rpm/Triggername\fR

\fI/var/tmp/rpm*\fR
.SH "VOIR AUSSI"

\fBpopt\fR(3),

\fBrpm2cpio\fR(8),

\fBrpmbuild\fR(8),

\fBhttp://www.rpm.org/\fR
.SH "AUTEURS"

Marc Ewing <marc@redhat.com>

Jeff Johnson <jbj@redhat.com>

Erik Troan <ewt@redhat.com>

.SH "TRADUCTION"
Frédéric Delanoy <\fIdelanoy_f at yahoo.com\fR>, 2002.


