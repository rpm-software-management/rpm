.\" 1999 PTM Przemek Borys :-Q
.\" Jakub Bogusz <qboosh@pld-linux.org>, 2003
.\" rpm - Red Hat Package Manager
.\" rpm 4.3-20030610
.TH rpm 8 "9 czerwca 2002" "Red Hat, Inc."
.SH NAZWA
rpm \- Menedżer pakietów RPM
.SH SKŁADNIA
.SS "ODPYTYWANIE I WERYFIKACJA PAKIETÓW:"
.PP

\fBrpm\fR {\fB-q|--query\fR} [\fBopcje-wyboru\fR] [\fBopcje-zapytań\fR]

\fBrpm\fR {\fB-V|--verify\fR} [\fBopcje-wyboru\fR] [\fBopcje-weryfikacji\fR]

\fBrpm\fR \fB--import\fR \fB\fIKLUCZ_PUBLICZNY\fB\fR\fI ...\fR

\fBrpm\fR {\fB-K|--checksig\fR} [\fB--nosignature\fR] [\fB--nodigest\fR]
    \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR

.SS "INSTALOWANIE, UAKTUALNIANIE I USUWANIE PAKIETÓW:"
.PP

\fBrpm\fR {\fB-i|--install\fR} [\fBopcje-instalacji\fR] \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR

\fBrpm\fR {\fB-U|--upgrade\fR} [\fBopcje-instalacji\fR] \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR

\fBrpm\fR {\fB-F|--freshen\fR} [\fBopcje-instalacji\fR] \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR

\fBrpm\fR {\fB-e|--erase\fR} [\fB--allmatches\fR] [\fB--nodeps\fR] [\fB--noscripts\fR]
    [\fB--notriggers\fR] [\fB--test\fR] \fB\fINAZWA_PAKIETU\fB\fR\fI\ ...\fR

.SS "RÓŻNE:"
.PP

\fBrpm\fR {\fB--initdb|--rebuilddb\fR}

\fBrpm\fR {\fB--addsign|--resign\fR} \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR

\fBrpm\fR {\fB--querytags|--showrc\fR}

\fBrpm\fR {\fB--setperms|--setugids\fR} \fB\fINAZWA_PAKIETU\fB\fR\fI ...\fR

.SS "opcje-wyboru"
.PP

 [\fB\fINAZWA_PAKIETU\fB\fR] [\fB-a,--all\fR] [\fB-f,--file \fIPLIK\fB\fR]
 [\fB-g,--group \fIGRUPA\fB\fR] {\fB-p,--package \fIPLIK_PAKIETU\fB\fR]
 [\fB--hdrid \fISHA1\fB\fR] [\fB--pkgid \fIMD5\fB\fR] [\fB--tid \fITID\fB\fR]
 [\fB--querybynumber \fINUMER_NAGŁÓWKA\fB\fR] [\fB--triggeredby \fINAZWA_PAKIETU\fB\fR]
 [\fB--whatprovides \fIWŁASNOŚĆ\fB\fR] [\fB--whatrequires \fIWŁASNOŚĆ\fB\fR]

.SS "opcje-zapytań"
.PP

 [\fB--changelog\fR] [\fB-c,--configfiles\fR] [\fB-d,--docfiles\fR] [\fB--dump\fR]
 [\fB--filesbypkg\fR] [\fB-i,--info\fR] [\fB--last\fR] [\fB-l,--list\fR]
 [\fB--provides\fR] [\fB--qf,--queryformat \fIFORMAT_ZAPYTANIA\fB\fR]
 [\fB-R,--requires\fR] [\fB--scripts\fR] [\fB-s,--state\fR]
 [\fB--triggers,--triggerscripts\fR]

.SS "opcje-weryfikacji"
.PP

 [\fB--nodeps\fR] [\fB--nofiles\fR] [\fB--noscripts\fR]
 [\fB--nodigest\fR] [\fB--nosignature\fR]
 [\fB--nolinkto\fR] [\fB--nomd5\fR] [\fB--nosize\fR] [\fB--nouser\fR]
 [\fB--nogroup\fR] [\fB--nomtime\fR] [\fB--nomode\fR] [\fB--nordev\fR]

.SS "opcje-instalacji"
.PP

 [\fB--aid\fR] [\fB--allfiles\fR] [\fB--badreloc\fR] [\fB--excludepath \fISTARA_ŚCIEŻKA\fB\fR]
 [\fB--excludedocs\fR] [\fB--force\fR] [\fB-h,--hash\fR]
 [\fB--ignoresize\fR] [\fB--ignorearch\fR] [\fB--ignoreos\fR]
 [\fB--includedocs\fR] [\fB--justdb\fR] [\fB--nodeps\fR]
 [\fB--nodigest\fR] [\fB--nosignature\fR] [\fB--nosuggest\fR]
 [\fB--noorder\fR] [\fB--noscripts\fR] [\fB--notriggers\fR]
 [\fB--oldpackage\fR] [\fB--percent\fR] [\fB--prefix \fINOWA_ŚCIEŻKA\fB\fR]
 [\fB--relocate \fISTARA_ŚCIEŻKA\fB=\fINOWA_ŚCIEŻKA\fB\fR]
 [\fB--replacefiles\fR] [\fB--replacepkgs\fR]
 [\fB--test\fR]

.SH OPIS
.PP
\fBrpm\fP jest potężnym \fBmenedżerem pakietów\fR, który może być używany do
budowania, instalowania, odpytywania, weryfikowania, uaktualniania i
usuwania pakietów oprogramowania. \fBPakiet\fR składa się z archiwum
plików oraz metadanych używanych do instalowania i usuwania plików.
Metadane zawierają pomocnicze skrypty, atrybuty plików oraz informacje
opisujące pakiet.
\fBPakiety\fR występują w dwóch wersjach: pakietach binarnych, służących
do opakowania oprogramowania do instalacji oraz pakietach źródłowych,
zawierających kod źródłowy i przepis na zbudowanie pakietów binarnych.
.PP
Należy wybrać jeden z następujących podstawowych trybów:
\fBOdpytywania\fR,
\fBWeryfikowania\fR,
\fBSprawdzania sygnatury\fR,
\fBInstalowania/Uaktualniania/Odświeżania\fR,
\fBOdinstalowywania\fR,
\fBInicjalizowania bazy danych\fR,
\fBPrzebudowywania bazy danych\fR,
\fBPonownego podpisywania\fR, 
\fBDodawania sygnatury\fR,
\fBustawiania właścicieli i grup\fR,
\fBPokazywania etykiet zapytań\fR, oraz
\fBPokazywania konfiguracji\fR.
.SS "OPCJE OGÓLNE"
.PP
Opcje te mogą być używane we wszystkich trybach.
.TP
\fB-?\fR, \fB--help\fR
Wypisuje informację o użyciu dłuższą niż zwykle.
.TP
\fB--version\fR
Wypisuje pojedynczą linię, zawierającą numer wersji używanego \fBrpm\fR-a.
.TP
\fB--quiet\fP
Wypisuje jak najmniej - zazwyczaj tylko komunikaty o błędach.
.TP
\fB-v\fR
Wypisuje szczegółowe informacje - zwykle komunikaty o przebiegu procesu.
.TP
\fB-vv\fR
Wypisuje dużo brzydkich informacji diagnostycznych.
.TP
\fB--rcfile \fILISTA_PLIKÓW\fB\fR
Każdy z plików w oddzielonej dwukropkami \fILIŚCIE_PLIKÓW\fP jest
odczytywany kolejno przez \fBrpm\fR-a w poszukiwaniu informacji o
konfiguracji.
Istnieć musi tylko pierwszy plik z listy, a tyldy są zamieniane na
wartość \fB$HOME\fR.
Domyślną \fILISTĄ_PLIKÓW\fR jest 
\fI/usr/lib/rpm/rpmrc\fR:\fI/usr/lib/rpm/redhat/rpmrc\fR:\fI/etc/rpmrc\fR:\fI~/.rpmrc\fR.
.TP
\fB--pipe \fIKOMENDA\fB\fR
Przekazuje potokiem wyjście \fBrpm\fP-a do \fIKOMENDY\fR.
.TP
\fB--dbpath \fIKATALOG\fB\fR
Używa bazy danych z \fIKATALOGU\fR zamiast domyślnego \fI/var/lib/rpm\fR.
.TP
\fB--root \fIKATALOG\fB\fR
Używa do wszystkich operacji systemu zakorzenionego w \fIKATALOGU\fR.
Zauważ, że oznacza to, że baza danych w \fIKATALOGU\fP
będzie używana przy sprawdzaniu zależności, a wszystkie skrypty (np.
\fB%post\fR przy instalacji pakietu lub
\fB%prep\fR przy budowaniu pakietu)
będą uruchamiane po chroot(2) na
\fIKATALOG\fR.
.SS "OPCJE INSTALOWANIA I UAKTUALNIANIA"
.PP
Ogólną postacią komendy instalowania rpm-a jest
.PP

\fBrpm\fR {\fB-i|--install\fR} [\fBinstall-options\fR] \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR

.PP
Instaluje to nowy pakiet.
.PP
Ogólną postacią komendy uaktualniania rpm-a jest
.PP

\fBrpm\fR {\fB-U|--upgrade\fR} [\fBinstall-options\fR] \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR

.PP
Uaktualnia to aktualnie zainstalowany lub instaluje pakiet w nowej wersji.
Jest to to samo co install, lecz wszystkie inne wersje pakietu będą
usunięte po zainstalowaniu nowego pakietu.
.PP

\fBrpm\fR {\fB-F|--freshen\fR} [\fBinstall-options\fR] \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR

.PP
Odświeży to pakiety, lecz tylko jeśli wcześniejsza wersja już istnieje.
\fIPLIK_PAKIETU\fR może być podany jako URL
\fBftp\fR lub
\fBhttp\fR.
W tym wypadku pakiet zostanie pobrany przed zainstalowaniem.
W sekcji \fBOPCJE FTP/HTTP\fR znajduje się więcej informacji o wewnętrznej
obsłudze klienckiej
\fBftp\fR i
\fBhttp\fR w \fBrpm\fR.
.PP
.TP
\fB--aid\fR
Dodaje w razie potrzeby sugerowane pliki do zbioru transakcji.
.TP
\fB--allfiles\fR
Instaluje lub odświeża wszystkie pliki missingok (takie, których może
brakować) z pakietu, niezależnie czy istnieją.
.TP
\fB--badreloc\fR
Do użytku w połączeniu z \fB--relocate\fR. Pozwala na relokowanie ścieżek
wszystkich plików, nie tylko tych, których \fISTARA_ŚCIEŻKA\fR jest na
liście podpowiedzi dla relokacji w pakiecie binarnym.
.TP
\fB--excludepath \fISTARA_ŚCIEŻKA\fB\fR
Nie instaluje plików, których nazwy rozpoczynają się od
\fISTARA_ŚCIEŻKA\fR.
.TP
\fB--excludedocs\fR
Nie instaluje żadnych plików, które są zaznaczone jako dokumentacja
(co tyczy się także podręczników man i texinfo).
.TP
\fB--force\fR
To samo, co użycie:
\fB--replacepkgs\fR,
\fB--replacefiles\fR i
\fB--oldpackage\fR.
.TP
\fB-h\fR, \fB--hash\fR
Wypisuje 50 znaków krzyżyka, pokazując proces rozpakowywania archiwum.
Używając z \fB-v|--verbose\fR, uzyskasz ładny obraz.
.TP
\fB--ignoresize\fR
Nie sprawdza, czy na zamontowanych systemach plików jest dość miejsca na
zainstalowanie tego pakietu.
.TP
\fB--ignorearch\fR
Umożliwia instalację lub uaktualnienie nawet w wypadku, gdy
architektury binarnego pakietu i hosta nie odpowiadają sobie.
.TP
\fB--ignoreos\fR
Umożliwia instalację lub uaktualnienie nawet w wypadku, gdy
systemy operacyjne binarnego pakietu i hosta nie odpowiadają sobie.
.TP
\fB--includedocs\fR
Instaluje pliki dokumentacji. Tak jest domyślnie.
.TP
\fB--justdb\fR
Odświeża tylko bazę danych, a nie system plików.
.TP
\fB--nodigest\fR
Nie weryfikuje skrótów kryptograficznych pakietu ani nagłówka przy odczycie.
.TP
\fB--nosignature\fR
Nie weryfikuje sygnatur pakietu ani nagłówka przy odczycie.
.TP
\fB--nodeps\fR
Nie dokonuje sprawdzenia zależności przed instalowaniem, lub
uaktualnieniem pakietu.
.TP
\fB--nosuggest\fR
Nie sugeruje pakietu(ów), które dostarczają brakującą zależność.
.TP
\fB--noorder\fR
Nie porządkuje pakietów do instalacji. Lista pakietów w normalnych
wypadkach jest porządkowana na nowo, aby spełnić zależności.
.TP
\fB--noscripts\fR
.TP
\fB--nopre\fR
.TP
\fB--nopost\fR
.TP
\fB--nopreun\fR
.TP
\fB--nopostun\fR
Nie wywołuje skryptów o podanej nazwie.
Opcja \fB--noscripts\fR jest równoważna

\fB--nopre\fR
\fB--nopost\fR
\fB--nopreun\fR
\fB--nopostun\fR

i wyłącza wykonywanie odpowiadających im skryptów
\fB%pre\fR,
\fB%post\fR,
\fB%preun\fR oraz
\fB%postun\fR.
.TP
\fB--notriggers\fR
.TP
\fB--notriggerin\fR
.TP
\fB--notriggerun\fR
.TP
\fB--notriggerpostun\fR
Nie wywołuje skryptów, które są pociągane przez instalację lub
usuwanie pakietu.
Opcja \fB--notriggers\fR jest równoważna

\fB--notriggerin\fR
\fB--notriggerun\fR
\fB--notriggerpostun\fR

i wyłącza wykonywanie odpowiadających im skryptów
\fB%triggerin\fR,
\fB%triggerun\fR oraz
\fB%triggerpostun\fR.
.TP
\fB--oldpackage\fR
Zezwala uaktualnianiu na zastąpienie nowszego pakietu starszym.
.TP
\fB--percent\fR
Wypisuje procenty podczas rozpakowywania plików z archiwum. Jest to zrobione
w celu ułatwienia wywoływania \frpm\fR-a z innych narzędzi.
.TP
\fB--prefix \fINOWA_ŚCIEŻKA\fB\fR
Dla pakietów relokowalnych tłumaczy wszystkie ścieżki plików
zaczynające się od prefiksu instalacji w podpowiedziach dla relokacji
na \fNOWĄ_ŚCIEŻKĘ\fR.
.TP
\fB--relocate \fISTARA_ŚCIEŻKA\fB=\fINOWA_ŚCIEŻKA\fB\fR
Dla pakietów relokowalnych tłumaczy wszystkie ścieżki plików
zaczynające się od \fISTAREJ_ŚCIEŻKI\fR w podpowiedziach dla relokacji
na \fINOWĄ_ŚCIEŻKĘ\fR.
Ta opcja może używana wiele razy, jeśli ma być zrelokowane kilka różnych
\fISTARYCH_ŚCIEŻEK\fR.
.TP
\fB--replacefiles\fR
Instaluje pakiety nawet jeśli zastępują one pliki z innych, już
zainstalowanych pakietów.
.TP
\fB--replacepkgs\fR
Instaluje pakiety nawet jeśli niektóre z nich są już zainstalowane na tym
systemie.
.TP
Nie instaluje pakietu, po prostu sprawdza i raportuje potencjalne
konflikty.
.SS "OPCJE USUWANIA"
.PP
Ogólną postacią komendy usuwania rpm-a jest
.PP

\fBrpm\fR {\fB-e|--erase\fR} [\fB--allmatches\fR] [\fB--nodeps\fR] [\fB--noscripts\fR] [\fB--notriggers\fR] [\fB--test\fR] \fB\fINAZWA_PAKIETU\fB\fR\fI ...\fR

.PP
Można użyć następujących opcji:
.TP
\fB--allmatches\fR
Usunie wszystkie wersje pakietu, które odpowiadają
\fI<NAZWIE_PAKIETU\fR. Normalnie wyświetlany jest błąd, gdy nazwa
ta odpowiada wielu pakietom.
.TP
\fB--nodeps\fR
Nie sprawdza zależności przed odinstalowaniem.
.TP
\fB--noscripts\fR
.TP
\fB--nopreun\fR
.TP
\fB--nopostun\fR
Nie wywołuje skryptów o podanej nazwie.
Opcja \fB--noscripts\fR przy usuwaniu pakietów jest równoważna

\fB--nopreun\fR
\fB--nopostun\fR

i wyłącza wykonywanie odpowiadających im skryptów
\fB%preun\fR oraz
\fB%postun\fR.
.TP
\fB--notriggers\fR
.TP
\fB--notriggerun\fR
.TP
\fB--notriggerpostun\fR
Nie wywołuje skryptów, które są pociągane przez usunięcie pakietu.
Opcja \fB--notriggers\fR jest równoważna

\fB--notriggerun\fR
\fB--notriggerpostun\fR

i wyłącza wykonywanie odpowiadających im skryptów
\fB%triggerun\fR oraz
\fB%triggerpostun\fR.
.TP
\fB--test\fR
Nie odinstalowuje niczego naprawdę, przechodzi tylko przez kolejne etapy.
Przydatne w połączeniu z opcją \fB-vv\fR w celach diagnostycznych.
.SS "OPCJE ZAPYTAŃ"
Ogólną postacią komendy zapytania rpm-a jest
.PP

\fBrpm\fR {\fB-q|--query\fR} [\fBopcje-wyboru\fR] [\fBopcje-zapytań\fR]

.PP
Można podać format, w jakim powinna zostać wypisywana informacja o pakiecie.
Aby tego dokonać, użyj opcji

 \fB--qf|--queryformat\fR \fB\fIFORMAT_ZAPYTANIA\fB\fR

z dołączonym łańcuchem formatującym \fIFORMAT_ZAPYTANIA\fR.
Formaty zapytań są zmodyfikowanymi wersjami standardowego formatowania
\fBprintf(3)\fR. Format jest złożony ze statycznych łańcuchów (które mogą
zawierać standardowe znaki specjalne C - dla nowych linii, tabulacji itp.)
oraz formatek typu, podobnych do tych z \fBprintf(3)\fR.
Ponieważ \fBrpm\fR już zna typ do wypisania, specyfikacja typu jest
pomijana. W jej miejsce wchodzi nazwa etykiety wypisywanego nagłówka,
ujęta w znaki \fB{}\fR. Nazwy etykiet nie są wrażliwe na wielkość liter,
a początkowa część \fBRPMTAG_\fR nazwy etykiety może być opuszczona.
.PP
Można zażądać innych formatów wyjściowych przez zakończenie etykiety
\fB:\fIznacznik_typu\fB\fR. Obecnie obsługiwane są następujące typy:
.TP
\fB:armor\fR
Pakuje klucz publiczny w osłonę ASCII.
.TP
\fB:base64\fR
Koduje dane binarne przy w base64.
.TP
\fB:date\fR
Używa formatu "%c" strftime(3).
.TP
\fB:day\fR
Używa formatu "%a %b %d %Y" strftime(3).
.TP
\fB:depflags\fR
Formatuje flagi zależności.
.TP
\fB:fflags\fR
Formatuje flagi plików.
.TP
\fB:hex\fR
Formatuje szesnastkowo.
.TP
\fB:octal\fR
Formatuje ósemkowo.
.TP
\fB:perms\fR
Formatuje uprawnienia plików.
.TP
\fB:shescape\fR
Zabezpiecza pojedyncze cudzysłowy do użycia w skrypcie.
.TP
\fB:triggertype\fR
Wyświetla przyrostek skryptów pociąganych.
.PP
Na przykład aby wypisać tylko nazwy odpytywanych pakietów, można użyć
jako łańcucha formatującego samego \fB%{NAME}\fP. Aby wypisać nazwy
pakietów i informacje o dystrybucji w dwóch kolumnach, można użyć
\fB%\-30{NAME}%{DISTRIBUTION}\fP (Nazwa będzie w 30 znakowym okienku,
z wyrównaniem do lewej - zobacz printf(3) - przyp. tłum.)

\fBrpm\fR uruchomiony z argumentem \fB--querytags\fR wypisze listę
wszystkich znanych etykiet.
.PP
Istnieją dwa podzbiory opcji dla odpytywania: wybór pakietu i wybór
informacji.
.SS "OPCJE WYBORU PAKIETU:"
.PP
.TP
\fB\fINAZWA_PAKIETU\fB\fR
Odpytuje zainstalowany pakiet o nazwie \fINAZWA_PAKIETU\fR.
.TP
\fB-a\fR, \fB--all\fR
Odpytuje wszystkie zainstalowane pakiety.
.TP
\fB-f\fR, \fB--file \fIPLIK\fB\fR
Odpytuje pakiet będący właścicielem \fIPLIKU\fR.
.TP
\fB-g\fR, \fB--group \fIGRUPA\fB\fR
Odpytuje pakiety o grupie \fIGRUPA\fR.
.TP
\fB-p\fR, \fB--package \fIPLIK_PAKIETU\fR
Odpytuje (nie zainstalowany) pakiet \fIPLIK_PAKIETU\fR.
Plik ten może być podany jako URL w stylu \fBftp\fR lub \fBhttp\fR.
W takiej sytuacji, przed odpytaniem plik zostanie pobrany.
W sekcji \fBOPCJE FTP/HTTP\fR znajduje się więcej informacji o wewnętrznej
obsłudze klienckiej
\fBftp\fR i
\fBhttp\fR w \fBrpm\fR-ie.
Argumenty \fIPLIK_PAKIETU\fR nie będące pakietami binarnymi są
interpretowane jako pliki manifest w formacie ASCII. Dopuszczalne
są komentarze zaczynające się od '#', a każda linia pliku manifest
może zawierać oddzielone odstępami wyrażenia glob, włącznie z URL-ami
ze zdalnymi wyrażeniami glob, które będą rozwijane na ścieżki
podstawiane w miejsce pliku manifest jako dodatkowe \fIPLIKI_PAKIETU\fR
do odpytania.
.TP
\fB--pkgid\fIMD5\fB\fR
Odpytuje pakiet zawierający podany identyfikator pakietu, będący
skrótem \fIMD5\fR połączonego nagłówka i zawartości danych.
.TP
\fB--querybynumber \fINUMBER_NAGŁÓWKA\fB\fR
Odpytuje bezpośrednio wpis z bazy o tym \fINUMERZE_NAGŁÓWKA\fR;
przydatne tylko do diagnostyki.
.TP
\fB--specfile \fIPLIK_SPEC\fB\fR
Przetwarza i odpytuje \fIPLIK_SPEC\fP tak, jakby był pakietem. Chociaż nie
jest dostępna cała informacja (np. lista plików), to ten typ zapytań
umożliwia używanie rpm-a do wyciągania informacji z plików spec bez
potrzeby pisania specyficznego parsera.
.TP
\fB--tid \fITID\fB\fR
Odpytuje pakiet(y) o podanym identyfikatorze transakcji \fITID\fR.
Aktualnie jako identyfikator używany jest uniksowy znacznik czasu
(timestamp). Wszystkie pakiety instalowane lub usuwane w pojedynczej
transakcji mają wspólny identyfikator.
.TP
\fB--triggeredby \fINAZWA_PAKIETU\fB\fR
Odpytuje pakiety, które są pociągnięte przez pakiety
\fINAZWA_PAKIETU\fR.
.TP
\fB--whatprovides \fIWŁASNOŚĆ\fB\fR
Odpytuje wszystkie pakiety udostępniające podaną \fIWŁASNOŚĆ\fR.
.TP
\fB--whatrequires \fIWŁASNOŚĆ\fB\fR
Odpytuje wszystkie pakiety wymagające do poprawnego działania podanej 
\fIWŁASNOŚCI\fR.
.SS "OPCJE ZAPYTANIA PAKIETU:"
.PP
.TP
\fB--changelog\fR
Wyświetla informacje o zmianach dla tego pakietu.
.TP
\fB-c\fR, \fB--configfiles\fR
Listuje tylko pliki konfiguracyjne (wymusza \fB-l\fR).
.TP
\fB-d\fR, \fB--docfiles\fR
Listuje tylko pliki dokumentacji (wymusza \fB-l\fR).
.TP
\fB--dump\fR
Wyrzuca informacje o pliku w następujący sposób:
.sp
.RS

.nf
ścieżka rozmiar czas_mod suma_md5 prawa właściciel grupa konfig dokum rdev symlink

.fi
.RE

Ta opcja musi być użyta z przynajmniej jednym z
\fB-l\fR,
\fB-c\fR,
\fB-d\fR.
\fB--filesbypkg\fR
Listuje wszystkie pliki z każdego z pakietów.
.TP
\fB-i\fR, \fB--info\fR
Wyświetla informację o pakiecie zawierające nazwę, wersję i opis. O ile
podano \fB--queryformat\fR, to jest on używany.
.TP
\fB--last\fR
Porządkuje listing pakietów podczas instalowania tak, że ostatnie pakiety są
na górze.
.TP
\fB-l\fR, \fB--list\fR
Listuje pliki z pakietu.
.TP
\fB--provides\fR
Listuje właściwości, które udostępnia pakiet.
.TP
\fB-R\fR, \fB--requires\fR
Listuje pakiety, od których zależy ten pakiet.
.TP
\fB--scripts\fR
Listuje specyficzne dla pakietu skrypty, które są używane jako część
procesu instalowania i odinstalowywania.
.TP
\fB-s\fR, \fB--state\fR
Wyświetla \fIstany\fR plików w pakiecie (wymusza \fB\-l\fR).
Stan każdego pliku może być jednym z
\fInormalny\fR,
\fIniezainstalowany\fR lub
\fIzastąpiony\fR.
.TP
\fB--triggers\fR, \fB--triggerscripts\fR
Wyświetla skrypty wywoływane przez inne pakiety (triggery) zawarte
w pakiecie.
.SS "OPCJE WERYFIKACJI"
.PP
Ogólną postacią komendy weryfikacji rpm-a jest
.PP

\fBrpm\fR {\fB-V|--verify\fR} [\fBopcje-wyboru\fR] [\fBopcje-weryfikacji\fR]

.PP
Weryfikowanie pakietu porównuje informacje o zainstalowanych plikach
w pakiecie z informacją o plikach pobraną z oryginalnego pakietu, zapisanego
w bazie rpm-a. Wśród innych rzeczy, porównywane są rozmiary, sumy MD5, prawa,
typ, właściciel i grupa każdego pliku. Wszystkie niezgodności są natychmiast
wyświetlane.
Pliki, które nie były zainstalowane z pakietu, jak na przykład dokumentacja
przy instalacji z opcją
"\fB--excludedocs\fR", są po cichu ignorowane.
.PP
Opcje wyboru pakietów są takie same jak dla odpytywania
pakietów (włącznie z plikami manifest jako argumentami).
Inne opcje unikalne dla trybu weryfikacji to:
.TP
\fB--nodeps\fR
Nie weryfikuje zależności pakietów.
.TP
\fB--nodigest\fR
Nie weryfikuje skrótów kryptograficznych nagłówka ani pakietu.
.TP
\fB--nofiles\fR
Nie weryfikuje żadnych atrybutów plików pakietu przy odczycie.
.TP
\fB--noscripts\fR
Nie wykonuje skryptów \fB%verifyscript\fR (nawet jeśli są).
.TP
\fB--nosignature\fR
Nie weryfikuje sygnatur pakietu ani nagłówka przy odczycie.
.TP
\fB--nolinkto\fR
.TP
\fB--nomd5\fR
.TP
\fB--nosize\fR
.TP
\fB--nouser\fR
.TP
\fB--nogroup\fR
.TP
\fB--nomtime\fR
.TP
\fB--nomode\fR
.TP
\fB--nordev\fR
Nie weryfikuje odpowiednich atrybutów plików.
.PP
Format wyjścia to łańcuch 9 znaków, z możliwym znacznikiem atrybutu:

.nf
\fBc\fR \fB%config\fR plik konfiguracyjny.
\fBd\fR \fB%doc\fR plik dokumentacji.
\fBg\fR \fB%ghost\fR plik nie istniejący (nie dołączony do danych pakietu).
\fBl\fR \fB%license\fR plik licencji.
\fBr\fR \fB%readme\fR plik przeczytaj-to.
.fi

z nagłówka pakietu, zakończonych nazwą pliku.
Każdy z 9 znaków oznacza wynik porównania jednego atrybutu pliku
z wartością atrybutu zapisaną w bazie danych. Pojedyncza
"\fB.\fR" (kropka)
oznacza, że test przeszedł pomyślnie, natomiast pojedynczy
"\fB?\fR" (znak zapytania)
oznacza, że test nie mógł być przeprowadzony (na przykład uprawnienia
pliku uniemożliwiają odczyt). W pozostałych przypadkach znak oznacza
niepowodzenie odpowiadającego mu testu \fB--verify\fR:

.nf
\fBS\fR (\fBS\fRize) - rozmiar pliku się różni
\fBM\fR (\fBM\fRode) - tryb (uprawnienia lub typ) pliku się różni
\fB5\fR (MD\fB5\fR) - suma MD5 się różni
\fBD\fR (\fBD\fRevice) - numery główny/poboczny urządzenia się nie zgadzają
\fBL\fR (\fBL\fRink) - ścieżka dowiązania się nie zgadza
\fBU\fR (\fBU\fRser) - właściciel pliku się różni
\fBG\fR (\fBG\fRrupa) - grupa pliku się różni
\fBT\fR (m\fBT\fRime) - czas modyfikacji pliku się różni
.fi

.SS "WERYFIKACJA CYFROWEJ SYGNATURY I SKRÓTU"
.PP
Ogólne postacie komend związanych z sygnaturami cyfrowymi to
.PP

\fBrpm\fR \fB--import\fR \fB\fIKLUCZ_PUBLICZNY\fB\fR\fI ...\fR

\fBrpm\fR {\fB--checksig\fR} [\fB--nosignature\fR] [\fB--nodigest\fR]
    \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR

.PP
Opcja \fB--checksig\fR sprawdza wszystkie skróty kryptograficzne
i sygnatury zawarte w
\fIPLIKU_PAKIETU\fR, aby zapewnić jego integralność i pochodzenie.
Zauważ, że sygnatury są teraz weryfikowane przy każdym odczycie
pakietu, a \fB--checksig\fR jest przydatne do zweryfikowania
wszystkich skrótów i sygnatur związanych z pakietem.
.PP
Sygnatury cyfrowe nie mogą być zweryfikowane bez klucza publicznego.
Klucz publiczny w opakowaniu ASCII może być dodany do bazy \fBrpm\fR-a
przy użyciu \fB--import\fR. Zaimportowany klucz publiczny jest
przechowywany w nagłówku, a zarządzanie pierścieniem kluczy wykonuje
się dokładnie tak samo, jak zarządzanie pakietami. Na przykład,
wszystkie aktualnie zaimportowane klucze publiczne można wyświetlić
przez:
.PP
\fBrpm -qa gpg-pubkey*\fR
.PP
Szczegółowe informacje o konkretnym kluczu publicznym po zaimportowaniu
mogą być wyświetlone przez odpytywanie. Oto informacje o kluczu GPG/DSA
Red Hata:
.PP
\fBrpm -qi gpg-pubkey-db42a60e\fR
.PP
Na koniec, klucze publiczne mogą być usunięte po zaimportowaniu
tak samo jak pakiety. Oto jak usunąć klucz GPG/DSA Red Hata:
.PP
\fBrpm -e gpg-pubkey-db42a60e\fR
.SS "PODPISYWANIE PAKIETU"
.PP

\fBrpm\fR \fB--addsign|--resign\fR \fB\fIPLIK_PAKIETU\fB\fR\fI ...\fR


Obie opcje, \fB--addsign\fR i \fB--resign\fR generują i umieszczają
nowe sygnatury dla każdego podanego pakietu \fIPLIK_PAKIETU\fR,
zastępując wszystkie istniejące sygnatury. Dwie opcje istnieją
z przyczyn historycznych, aktualnie nie ma różnic w ich zachowaniu.
.SS "UŻYWANIE GPG TO PODPISYWANIA PAKIETÓW"
.PP
Aby podpisać pakiety przy użyciu GPG, \fBrpm\fR musi być skonfigurowany,
aby mógł uruchamiać GPG i odnaleźć pierścień kluczy z odpowiednimi
kluczami. Domyślnie \fBrpm\fR używa przy szukaniu kluczy tych samych
konwencji co GPG, czyli zmiennej środowiskowej \fB$GNUPGHOME\fR.
Jeśli pierścienie kluczy nie są zlokalizowane tam, gdzie GPG ich
oczekuje, trzeba skonfigurować makro
\fB%_gpg_path\fR
aby wskazywała na lokalizację pierścieni kluczy GPG, które mają być
używane.
.PP
Dla kompatybilności ze starszymi wersjami GPG, PGP oraz rpm-a,
powinny być skonfigurowane tylko pakiety sygnatur OpenPGP V3.
Mogą być używane algorytmy weryfikacji DSA lub RSA, ale DSA jest
preferowany.
.PP
Jeśli chcesz podpisywać pakiety, które sam tworzysz, musisz też
utworzyć swój własny klucz publiczny i poufny (zobacz podręcznik GPG).
Będziesz też potrzebował skonfigurować makra \fBrpm\fR-a:
.TP
\fB%_gpg_name\fR
Nazwa "użytkownika", którego klucz będzie używany do podpisu.
.PP
Na przykład, aby użyć GPG do podpisania pakietów jako użytkownik
\fI"John Doe <jdoe@foo.com>"\fR z pierścieni kluczy zlokalizowanych
w \fB/etc/rpm/.pgp\fP,
przy użyciu programu \fI/usr/bin/gpg\fR, załączyłbyś
.PP
.nf
%_gpg_path /etc/rpm/.gpg
%_gpg_name John Doe <jdoe@foo.com>
%_gpgbin /usr/bin/gpg
.fi
.PP
w pliku konfiguracji makr. Do ogólnosystemowej konfiguracji użyj
\fI/etc/rpm/macros\fR, a dla lokalnej \fI~/.rpmmacros\fR.
.SS "OPCJE PRZEBUDOWYWANIA BAZY DANYCH"
.PP
Ogólna postać komendy przebudowywania bazy danych rpm-a to
.PP

\fBrpm\fR {\fB--initdb|--rebuilddb\fR} [\fB-v\fR] [\fB--dbpath \fIKATALOG\fB\fR] [\fB--root \fIKATALOG\fB\fR]

.PP
Użyj \fB--initdb\fR aby utworzyć nową bazę danych lub
\fB--rebuilddb\fR, aby przebudować indeksy bazy danych
z nagłówków zainstalowanych pakietów.
.SS "WYŚWIETLANIE KONFIGURACJI"
.PP
Polecenie
.PP
\fBrpm\fR \fB--showrc\fR
.PP
pokazuje wartości, których \fBrpm\fR będzie używał dla wszystkich
opcji, które są aktualnie ustawione w plikach konfiguracyjnych
\fIrpmrc\fR oraz
\fImacros\fR.
.SS "OPCJE FTP/HTTP"
.PP
\fBrpm\fR może działać jako klient FTP i/lub HTTP, co pozwala na
odpytywanie lub instalowanie pakietów z Internetu.
Pliki pakietów do operacji instalacji, uaktualnienia lub odpytania
mogą być podane jako URL w stylu
\fBftp\fR lub
\fBhttp\fR:
.PP
ftp://UŻYTKOWNIK:HASŁO@HOST:PORT/ścieżka/do/pakietu.rpm
.PP
Jeśli część \fB:HASŁO\fR jest pominięta, użytkownik zostanie o nie
zapytany (jednokrotnie na parę użytkownik/host). Jeśli pominięto nazwę
użytkownika i hasło, używany jest anonimowy \fBftp\fR. We wszystkich
przypadkach używane są pasywne (PASV) transfery \fBftp\fR.
.PP
\fBrpm\fR zezwala na używanie z URL-ami \fBftp\fR następujących opcji:
.TP
\fB--ftpproxy \fIHOST\fB\fR
Podany \fIHOST\fR będzie używany jako proxy dla wszystkich transferów
ftp, co umożliwia użytkownikom ściąganie danych przez zapory ogniowe,
które używają systemów proxy. Opcja ta może być też podana przez
skonfigurowanie makra \fB%_ftpproxy\fP.
.TP
\fB--ftpport \fIPORT\fB\fR
Numer \fIPORTU\fR TCP, którego użyć do połączenia ftp na serwerze proxy
zamiast portu domyślnego. Opcja ta może być też podana przez
skonfigurowanie makra \fB%_ftpport\fP.
.PP
\fBrpm\fR zezwala na używanie z URL-ami \fBhttp\fR następujących opcji:
.TP
\fB--httpproxy \fIHOST\fB\fR
Podany \fIHOST\fR będzie używany jako proxy dla wszystkich transferów
\fBhttp\fR. Opcja ta może być też podana przez skonfigurowanie makra
\fB%_httpproxy\fR.
.TP
\fB--httpport \fIPORT\fB\fR
Numer \fIPORTU\fR TCP, którego użyć do połączenia \fBhttp\fR na serwerze
proxy zamiast portu domyślnego. Opcja ta może być też podana przez
skonfigurowanie makra \fB%_httpport\fR.
.SH "SPRAWY SPADKOWE"
.SS "Uruchamianie rpmbuild"
.PP
Tryby budowania rpm-a znajdują się teraz w programie
\fI/usr/bin/rpmbuild\fR.
Mimo że spadkowa kompatybilność zapewniona przez wymienione niżej aliasy
popt jest wystarczająca, kompatybilność nie jest doskonała; dlatego
kompatybilność trybu budowania poprzez aliasy popt jest usuwana z rpm-a.
Zainstaluj pakiet \fBrpm-build\fR i zobacz
\fBrpmbuild\fR(8), gdzie znajduje się dokumentacja wszystkich trybów budowania
\fBrpm\fR poprzednio udokumentowana w niniejszym
\fBrpm\fR(8).
.PP
Dodaj następujące linie do \fI/etc/popt\fR, jeśli chcesz nadal uruchamiać
\fBrpmbuild\fR z linii poleceń \fBrpm\fR-a:
.PP
.nf
rpm     exec --bp               rpmb -bp
rpm     exec --bc               rpmb -bc
rpm     exec --bi               rpmb -bi
rpm     exec --bl               rpmb -bl
rpm     exec --ba               rpmb -ba
rpm     exec --bb               rpmb -bb
rpm     exec --bs               rpmb -bs 
rpm     exec --tp               rpmb -tp 
rpm     exec --tc               rpmb -tc 
rpm     exec --ti               rpmb -ti 
rpm     exec --tl               rpmb -tl 
rpm     exec --ta               rpmb -ta
rpm     exec --tb               rpmb -tb
rpm     exec --ts               rpmb -ts 
rpm     exec --rebuild          rpmb --rebuild
rpm     exec --recompile        rpmb --recompile
rpm     exec --clean            rpmb --clean
rpm     exec --rmsource         rpmb --rmsource
rpm     exec --rmspec           rpmb --rmspec
rpm     exec --target           rpmb --target
rpm     exec --short-circuit    rpmb --short-circuit
.fi
.SH "PLIKI"
.SS "Konfiguracja rpmrc"
.PP
.nf
\fI/usr/lib/rpm/rpmrc\fR
\fI/usr/lib/rpm/redhat/rpmrc\fR
\fI/etc/rpmrc\fR
\fI~/.rpmrc\fR
.fi
.SS "Konfiguracja makr"
.PP
.nf
\fI/usr/lib/rpm/macros\fR
\fI/usr/lib/rpm/redhat/macros\fR
\fI/etc/rpm/macros\fR
\fI~/.rpmmacros\fR
.fi
.SS "Baza danych"
.PP
.nf
\fI/var/lib/rpm/Basenames\fR
\fI/var/lib/rpm/Conflictname\fR
\fI/var/lib/rpm/Dirnames\fR
\fI/var/lib/rpm/Filemd5s\fR
\fI/var/lib/rpm/Group\fR
\fI/var/lib/rpm/Installtid\fR
\fI/var/lib/rpm/Name\fR
\fI/var/lib/rpm/Packages\fR
\fI/var/lib/rpm/Providename\fR
\fI/var/lib/rpm/Provideversion\fR
\fI/var/lib/rpm/Pubkeys\fR
\fI/var/lib/rpm/Removed\fR
\fI/var/lib/rpm/Requirename\fR
\fI/var/lib/rpm/Requireversion\fR
\fI/var/lib/rpm/Sha1header\fR
\fI/var/lib/rpm/Sigmd5\fR
\fI/var/lib/rpm/Triggername\fR
.fi
.SS "Tymczasowe"
.PP
\fI/var/tmp/rpm*\fR
.SH "ZOBACZ TAKŻE"

.nf
\fBpopt\fR(3),
\fBrpm2cpio\fR(8),
\fBrpmbuild\fR(8),
.fi

\fBhttp://www.rpm.org/ <URL:http://www.rpm.org/>
\fR

.SH "AUTORZY"

.nf
Marc Ewing <marc@redhat.com>
Jeff Johnson <jbj@redhat.com>
Erik Troan <ewt@redhat.com>
.fi
