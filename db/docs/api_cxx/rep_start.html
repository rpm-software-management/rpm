<!--$Id: rep_start.so,v 1.17 2006/03/15 19:39:22 bostic Exp $-->
<!--Copyright (c) 1997,2007 Oracle.  All rights reserved.-->
<!--See the file LICENSE for redistribution information.-->
<html>
<head>
<title>Berkeley DB: DbEnv::rep_start</title>
<meta name="description" content="Berkeley DB: An embedded database programmatic toolkit.">
<meta name="keywords" content="embedded,database,programmatic,toolkit,btree,hash,hashing,transaction,transactions,locking,logging,access method,access methods,Java,C,C++">
</head>
<body bgcolor=white>
<table width="100%"><tr valign=top>
<td>
<h3>DbEnv::rep_start</h3>
</td>
<td align=right>
<a href="../api_cxx/api_core.html"><img src="../images/api.gif" alt="API"></a>
<a href="../ref/toc.html"><img src="../images/ref.gif" alt="Ref"></a></td>
</tr></table>
<hr size=1 noshade>
<tt>
<h3><pre>
#include &lt;db_cxx.h&gt;
<p>
int
DbEnv::rep_start(Dbt *cdata, u_int32_t flags);
</pre></h3>
<hr size=1 noshade>
<h3>Description: DbEnv::rep_start</h3>
<p>The DbEnv::rep_start method configures the database environment as a client
or master in a group of replicated database environments.</p>
<p>The DbEnv::rep_start method is not called by most replication
applications.  It should only be called by applications implementing
their own network transport layer, explicitly holding replication group
elections and handling replication messages outside of the replication
manager framework.</p>
<p>Replication master environments are the only database environments where
replicated databases may be modified.  Replication client environments
are read-only as long as they are clients.  Replication client
environments may be upgraded to be replication master environments in
the case that the current master fails or there is no master present.</p>
<p>The enclosing database environment must already have been opened by
calling the <a href="../api_cxx/env_open.html">DbEnv::open</a> method and must already have been configured
to send replication messages by calling the <a href="../api_cxx/rep_transport.html">DbEnv::rep_set_transport</a> method.</p>
<p>The DbEnv::rep_start method
either returns a non-zero error value
or throws an exception that encapsulates a non-zero error value on
failure, and returns 0 on success.
</p>
<h3>Parameters</h3>
<dl compact>
<dt><b>cdata</b><dd>The <b>cdata</b> parameter is an opaque data item that is sent over the
communication infrastructure when the client comes online (see
<a href="../ref/rep/newsite.html">Connecting to a new site</a> for more
information).  If no such information is useful, <b>cdata</b> should
be NULL.
<dt><b>flags</b><dd>The <b>flags</b> parameter must be set to one of the following values:
<dl compact>
<dt><a name="DB_REP_CLIENT">DB_REP_CLIENT</a><dd>Configure the environment as a replication client.
<dt><a name="DB_REP_MASTER">DB_REP_MASTER</a><dd>Configure the environment as a replication master.
</dl>
</dl>
<h3>Errors</h3>
<p>The DbEnv::rep_start method
may fail and throw
<a href="../api_cxx/except_class.html">DbException</a>,
encapsulating one of the following non-zero errors, or return one of
the following non-zero errors:</p>
<dl compact>
<dt>EINVAL<dd>If the database environment was not already configured to communicate with
a replication group by a call to <a href="../api_cxx/rep_transport.html">DbEnv::rep_set_transport</a>;
the database environment was not already opened; or if an
invalid flag value or parameter was specified.
</dl>
<hr size=1 noshade>
<h3>Class</h3>
<a href="../api_cxx/env_class.html">DbEnv</a>
<h3>See Also</h3>
<a href="../api_cxx/rep_list.html">Replication and Related Methods</a>
</tt>
<table width="100%"><tr><td><br></td><td align=right>
<a href="../api_cxx/api_core.html"><img src="../images/api.gif" alt="API"></a><a href="../ref/toc.html"><img src="../images/ref.gif" alt="Ref"></a>
</td></tr></table>
<p><font size=1>Copyright (c) 1996,2007 Oracle.  All rights reserved.</font>
</body>
</html>
